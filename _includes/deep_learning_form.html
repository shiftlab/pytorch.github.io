<div id="mc_embed_signup">
  <form
    action="https://shiftlab.us10.list-manage.com/subscribe/post?u=70ee71dbcda866ac46eb16e99&amp;id=ce4f38feea"
    method="post"
    id="mc-embedded-subscribe-form"
    name="mc-embedded-subscribe-form"
    class="email-subscribe-form validate deep-learning-form"
    target="_blank">
    <div id="mc_embed_signup_scroll" class="email-subscribe-form-fields-wrapper">

      <div class="mc-field-group">
        <label for="mce-EMAIL">Email Address  <span class="asterisk">*</span></label>
        <input type="email" value="" name="EMAIL" class="required" required id="mce-EMAIL">
      </div>

      <div class="mc-field-group">
        <label for="mce-MMERGE3">What is your Role?  <span class="asterisk">*</span></label>
        <select name="MMERGE3" class="role-selection required" required id="mce-MMERGE3">
          <option value=""></option>
        </select>
      </div>

      <div class="mc-field-group other-role">
        <label for="MMERGE2">Other Role<span class="asterisk">*</span></label>
        <input type="text" value="" name="MMERGE4" id="mce-MMERGE4">
      </div>

      <div class="mc-field-group">
        <label for="mce-MMERGE1">How do you intend to use PyTorch? What do you intend to build? <span class="asterisk">*</span></label>
        <textarea type="text" value="" name="MMERGE1" class="required" required id="mce-MMERGE1"></textarea>
      </div>

      <div class="mc-field-group error-field">
        <input type="hidden" value="" name="MMERGE2" id="mce-MMERGE2"></textarea>
      </div>

      <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"><a href="{{ site.baseurl}}/deep-learning-with-pytorch-thank-you" target="_blank"></a></div>
      </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->

      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_75419c71fe0a935e53dfa4a3f_91d0dccd39" tabindex="-1" value=""></div>
      <button id="deep-learning-button" class="btn btn-lg with-right-arrow module-button email-subscribe-button">Download Book</button>
    </div>
  </form>

  <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSent2u6ygBdPxpsc3oFH2N4TwUppvyIpo2fEIu3K-az3AJQow/viewform?embedded=true" width="640" height="382" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>
</div>

<script src="//cdn.jsdelivr.net/gh/cferdinandi/bouncer@1.0.5/dist/bouncer.polyfills.min.js"></script>
<script type='text/javascript'>
  var bouncer = new Bouncer("#mc-embedded-subscribe-form", {
  // Don't automatically submit the form if it's verified
  disableSubmit: true
  });
  document.addEventListener(
    "bouncerFormValid",
    function(event) {
      var $form = $(event.target);
      var $button = $form.find(".email-subscribe-button");

      $.ajax({
        type: "GET",
        url:
          "https://shiftlab.us10.list-manage.com/subscribe/post-json?u=70ee71dbcda866ac46eb16e99&amp;id=ce4f38feea&c=?",
        data: $form.serialize(),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function(data) {
          if (data.result == "success") {
            window.location.href =
              "{{site.baseurl}}/deep-learning-with-pytorch-thank-you";
          } else {
            if (data.msg.includes("is already subscribed to list")) {
              window.location.href =
                "{{site.baseurl}}/deep-learning-with-pytorch-thank-you";
            } else {
              $form
                .find("#mce-error-response")
                .html("There was an error submitting the form. Please try again.")
                .show();
            }
          }
        },
        error: function(e) {
          window.location.href =
            "https://twitter.us14.list-manage.com/subscribe/post-json?u=75419c71fe0a935e53dfa4a3f&amp;id=91d0dccd39&c=?";
        }
      });
    },
    false
  );

  function checkForOtherOption() {
    if ($(".role-selection option:selected").text() == "Other") {
      $(".other-role").show();
      $("#mce-MMERGE4").prop("required", true);
    } else {
      $(".other-role").hide();
      $("#mce-MMERGE4").prop("required", false);
    }
  }

  function randomizeOptions() {
    var options = [
      "<option value='Data Scientist'>Data Scientist</option>",
      "<option value='AI / ML Researcher'>AI / ML Researcher</option>",
      "<option value='AI / ML Engineer'>AI / ML Engineer</option>",
      "<option value='Professional Developer or Software Engineer (Non-AI / ML)'>Professional Developer or Software Engineer (Non-AI / ML)</option>",
      "<option value='Student'>Student</option>",
      "<option value='Other'>Other</option>"
    ];

    // Fisher-Yates algorithm taken from
    // https://medium.com/@nitinpatel_20236/how-to-shuffle-correctly-shuffle-an-array-in-javascript-15ea3f84bfb

    for (var i = options.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * i);
      var temp = options[i];
      options[i] = options[j];
      options[j] = temp;
    }

    for (var i = 0; i < options.length; i++) {
      $("#mce-MMERGE3").append(options[i]);
    }
  }

  $(".role-selection").change(function (event) {
    checkForOtherOption();
  });

  randomizeOptions();
  checkForOtherOption();
</script>
